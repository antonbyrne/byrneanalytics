{% extends 'layout.html' %}
{% block title %}Mortgage Interest Rates{% endblock %}
{% block content %}
<h2>Average Mortgage Rates Over Time</h2>
<canvas id="mortgageChart" width="600" height="400"></canvas>

<div class="chart-commentary">
    <button id="toggleCommentary">Show Commentary</button>
    <div id="commentaryContent" style="display: none;">
        <h3>What Are Mortgage Rates?</h3>
        <p>A mortgage is a loan used to buy a home or land, where the property itself acts as collateral. Mortgage interest rates determine the cost of borrowing money for the purchase of a property. The European Central Bank (ECB) sets the base interest rate, and Irish banks borrow money at this rate before lending money at a higher interest rate to buyers. Fixed-rate mortgages apply a set rate, and the rate is unaffected by ECB interest rate decisions. Conversly, variable rates fluctuate with ECB decisions. The European Central Bank raises interest rates to fight inflation, and decreases interest rates to counter recession. </p>

        <h3>Why Do Mortgage Interest Rates Matter?</h3>   
        <p>During times of low mortgage rates, more buyers enter the markets and prices rise. When rates are high, there are fewer buyers and prices stabilise or fall. Higher rates mean higher repayments, which decrease homeowner's disposable incomes. As well as this, construction slows down when buyers cannot afford mortgages. Banks earn more from high interest rates, but face greater default risks.</p>

        <h3>Ireland's Mortgage Rate Trends</h3>
        <p>Ireland experienced an era of low mortgage rates after Covid-19 because of the ECB's 0% interest rates. In the years following, ECB rates have been steadily increasing, and so too have Irish mortgage rates. Despite ECB rates being uniform, Irish mortgage rates are higher than the Eurozone average. This is due largely to the lack of competition in the Irish market. With fewer lenders, there is less incentive for banks and other lenders, such as Avant Money, to reduce their interest rates.</p>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    const years = {{ years | tojson }};
    const rates = {{ rates | tojson }};

    const ctx = document.getElementById('mortgageChart').getContext('2d');
    new Chart(ctx, {
        type: 'line',
        data: {
            labels: years,
            datasets: [{
                label: 'Avg Mortgage Rate (%)',
                data: rates,
                borderColor: 'teal',
                backgroundColor: 'rgba(0, 128, 128, 0.2)',
                tension: 0.3
            }]
        },
        options: {
            responsive: true,
            scales: {
                y: {
                    title: {
                        display: true,
                        text: 'Interest Rate (%)'
                    }
                },
                x: {
                    title: {
                        display: true,
                        text: 'Year'
                    }
                }
            }
        }
    });
</script>

<script>
document.getElementById("toggleCommentary").addEventListener("click", function() {
    const content = document.getElementById("commentaryContent");
    if (content.style.display === "none") {
        content.style.display = "block";
        this.textContent = "Hide Commentary";
    } else {
        content.style.display = "none";
        this.textContent = "Show Commentary";
    }
});
</script>

<p><a href="{{ url_for('visuals') }}">‚Üê Back to Visuals</a></p>

{% endblock %}
